<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog logicalFilePath="db.changelog-master.xml" xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <changeSet author="rajko.jegdic (generated)" id="1524043055147-1">
        <createTable tableName="City">
            <column autoIncrement="true" name="id" type="INT">
                <constraints primaryKey="true" primaryKeyName="CityPK"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
            <column name="country_id" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-2">
        <createTable tableName="Club">
            <column autoIncrement="true" name="id" type="INT">
                <constraints primaryKey="true" primaryKeyName="ClubPK"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
            <column name="city_id" type="INT"/>
            <column name="competition_id" type="INT"/>
            <column name="stadium_id" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-3">
        <createTable tableName="Competition">
            <column autoIncrement="true" name="id" type="INT">
                <constraints primaryKey="true" primaryKeyName="CompetitionPK"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
            <column name="country_id" type="INT"/>
            <column name="rank_id" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-4">
        <createTable tableName="Country">
            <column autoIncrement="true" name="id" type="INT">
                <constraints primaryKey="true" primaryKeyName="CountryPK"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-5">
        <createTable tableName="Person">
            <column autoIncrement="true" name="id" type="INT">
                <constraints primaryKey="true" primaryKeyName="PersonPK"/>
            </column>
            <column name="dateofbirth" type="date"/>
            <column name="firstname" type="VARCHAR(255)"/>
            <column name="lastname" type="VARCHAR(255)"/>
            <column name="cityofbirth_id" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-6">
        <createTable tableName="Player">
            <column autoIncrement="true" name="id" type="INT">
                <constraints primaryKey="true" primaryKeyName="PlayerPK"/>
            </column>
            <column name="club_id" type="INT"/>
            <column name="nationalteam_id" type="INT"/>
            <column name="person_id" type="INT"/>
            <column name="playerstats_id" type="INT"/>
            <column name="position_id" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-7">
        <createTable tableName="Position">
            <column autoIncrement="true" name="id" type="INT">
                <constraints primaryKey="true" primaryKeyName="PositionPK"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-8">
        <createTable tableName="Rank">
            <column autoIncrement="true" name="id" type="INT">
                <constraints primaryKey="true" primaryKeyName="RankPK"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-9">
        <createTable tableName="Referee">
            <column autoIncrement="true" name="id" type="INT">
                <constraints primaryKey="true" primaryKeyName="RefereePK"/>
            </column>
            <column name="person_id" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-10">
        <createTable tableName="Stadium">
            <column autoIncrement="true" name="id" type="INT">
                <constraints primaryKey="true" primaryKeyName="StadiumPK"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-11">
        <createTable tableName="clubhistory">
            <column autoIncrement="true" name="id" type="INT">
                <constraints primaryKey="true" primaryKeyName="clubhistoryPK"/>
            </column>
            <column name="player_id" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-12">
        <createTable tableName="match">
            <column autoIncrement="true" name="id" type="INT">
                <constraints primaryKey="true" primaryKeyName="matchPK"/>
            </column>
            <column name="awayclub_id" type="INT"/>
            <column name="homeclub_id" type="INT"/>
            <column name="matchstats_id" type="INT"/>
            <column name="referee_id" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-13">
        <createTable tableName="matchstats">
            <column autoIncrement="true" name="id" type="INT">
                <constraints primaryKey="true" primaryKeyName="matchstatsPK"/>
            </column>
            <column name="assistance" type="INT"/>
            <column name="cards" type="INT"/>
            <column name="endresult" type="INT"/>
            <column name="fouls" type="INT"/>
            <column name="halftimeresult" type="INT"/>
            <column name="passes" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-14">
        <createTable tableName="nationalteam">
            <column autoIncrement="true" name="id" type="INT">
                <constraints primaryKey="true" primaryKeyName="nationalteamPK"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
            <column name="competition_id" type="INT"/>
            <column name="country_id" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-15">
        <createTable tableName="playerstats">
            <column autoIncrement="true" name="id" type="INT">
                <constraints primaryKey="true" primaryKeyName="playerstatsPK"/>
            </column>
            <column name="assistance" type="INT"/>
            <column name="cards" type="INT"/>
            <column name="fouls" type="INT"/>
            <column name="goals" type="INT"/>
            <column name="passes" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-16">
        <addForeignKeyConstraint baseColumnNames="competition_id" baseTableName="Club" constraintName="FK_3j5oosrro3364nou5dk2lb3pl" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Competition"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-17">
        <addForeignKeyConstraint baseColumnNames="person_id" baseTableName="Player" constraintName="FK_3k4v1g8nll9y1oh5r5iumbytp" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Person"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-18">
        <addForeignKeyConstraint baseColumnNames="competition_id" baseTableName="nationalteam" constraintName="FK_3kgxbvpegedavkp40jaf715me" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Competition"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-19">
        <addForeignKeyConstraint baseColumnNames="homeclub_id" baseTableName="match" constraintName="FK_434omus1a6qf88kutw29qxv1e" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Club"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-20">
        <addForeignKeyConstraint baseColumnNames="person_id" baseTableName="Referee" constraintName="FK_89rhe8wm2one3sr262p3k2fk7" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Person"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-21">
        <addForeignKeyConstraint baseColumnNames="cityofbirth_id" baseTableName="Person" constraintName="FK_8wn40qodtwfnnucxs25pjvuah" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="City"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-22">
        <addForeignKeyConstraint baseColumnNames="nationalteam_id" baseTableName="Player" constraintName="FK_eu2x28qhmvl1lfrc6b2pxu7io" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="nationalteam"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-23">
        <addForeignKeyConstraint baseColumnNames="player_id" baseTableName="clubhistory" constraintName="FK_f4aqj213n7kh08339wh7hjktu" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Player"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-24">
        <addForeignKeyConstraint baseColumnNames="club_id" baseTableName="Player" constraintName="FK_g4vfjfg8nqnyp9quuses90hwp" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Club"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-25">
        <addForeignKeyConstraint baseColumnNames="city_id" baseTableName="Club" constraintName="FK_gmaufqu7x6j778jsypdhl4msl" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="City"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-26">
        <addForeignKeyConstraint baseColumnNames="rank_id" baseTableName="Competition" constraintName="FK_hbjbk32o32lf7nrp0c5ionrak" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Rank"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-27">
        <addForeignKeyConstraint baseColumnNames="referee_id" baseTableName="match" constraintName="FK_iavh8rdhs7upbfwk7kps10to7" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Referee"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-28">
        <addForeignKeyConstraint baseColumnNames="matchstats_id" baseTableName="match" constraintName="FK_iwp7ln5bte2a7nuwd97ucl4ft" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="matchstats"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-29">
        <addForeignKeyConstraint baseColumnNames="country_id" baseTableName="City" constraintName="FK_m503bcpirmab9y40lg2ia9d54" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Country"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-30">
        <addForeignKeyConstraint baseColumnNames="awayclub_id" baseTableName="match" constraintName="FK_mbp9rn05wat8rj8xfpyi0v9vk" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Club"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-31">
        <addForeignKeyConstraint baseColumnNames="country_id" baseTableName="nationalteam" constraintName="FK_mnmrmaf664e0gt0tf2f9l0qyr" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Country"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-32">
        <addForeignKeyConstraint baseColumnNames="playerstats_id" baseTableName="Player" constraintName="FK_mqdpkupwf01p9qpni7pk763ql" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="playerstats"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-33">
        <addForeignKeyConstraint baseColumnNames="country_id" baseTableName="Competition" constraintName="FK_qk8sdhsdo6k40vohg37p5052n" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Country"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-34">
        <addForeignKeyConstraint baseColumnNames="position_id" baseTableName="Player" constraintName="FK_qslox644kmgewlytf6io8tcco" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Position"/>
    </changeSet>
    <changeSet author="rajko.jegdic (generated)" id="1524043055147-35">
        <addForeignKeyConstraint baseColumnNames="stadium_id" baseTableName="Club" constraintName="FK_s4it79fie4hr2yopdet1icinw" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Stadium"/>
    </changeSet>
    <changeSet author="vladimir.jevtic (generated)" id="1524050687731-1">
        <addColumn schemaName="footstats"
                   tableName="country">
            <column name="countrycodes" type="VARCHAR(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="vladimir.jevtic (generated)" id="1524050687731-666">
        <dropForeignKeyConstraint baseTableName="competition" constraintName="FK_hbjbk32o32lf7nrp0c5ionrak"/>
        <dropTable cascadeConstraints="false"
                   schemaName="footstats"
                   tableName="rank"/>
        <dropColumn
                columnName="rank_id"
                schemaName="footstats"
                tableName="competition"/>
        <addColumn schemaName="footstats"
                   tableName="competition">
            <column name="rank" type="INT"/>
        </addColumn>
    </changeSet>
    <changeSet author="vladimir.jevtic (generated)" id="1524050687731-667">
        <dropForeignKeyConstraint baseTableName="person" constraintName="FK_8wn40qodtwfnnucxs25pjvuah"/>
    </changeSet>
    <changeSet author="vladimir.jevtic (generated)" id="1524050687731-668">
        <dropColumn columnName="cityofbirth_id"
                    schemaName="footstats"
                    tableName="person"/>
    </changeSet>
    <changeSet author="vladimir.jevtic (generated)" id="1524050687731-669">
        <addColumn schemaName="footstats"
                   tableName="person">
            <column name="countryofbirth_id" type="INT"/>
        </addColumn>
    </changeSet>
    <changeSet author="vladimir.jevtic (generated)" id="1524050687731-670">
        <addForeignKeyConstraint baseColumnNames="countryofbirth_id" baseTableName="Person" constraintName="FK_8wn40qodtwfnnucxs25pjvuah" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="Country"/>
    </changeSet>
    <changeSet author="vladimir.jevtic (generated)" id="1524050687731-674">
        <dropColumn columnName="dateofbirth"
                    schemaName="footstats"
                    tableName="person"/>
    </changeSet>
    <changeSet author="vladimir.jevtic (generated)" id="1524050687731-675">
        <addColumn schemaName="footstats"
                   tableName="person">
            <column name="dateofbirth" type="TIMESTAMP" defaultValueComputed="null">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="vladimir.jevtic (generated)" id="1524050687731-676">
        <renameTable newTableName="game"
                     oldTableName="match"
                     schemaName="footstats"/>
    </changeSet>
    <changeSet author="vladimir.jevtic (generated)" id="1524050687731-677">
        <modifyDataType columnName="halftimeresult"
                        newDataType="VARCHAR(255)"
                        schemaName="footstats"
                        tableName="matchstats"/>
        <modifyDataType columnName="endresult"
                        newDataType="VARCHAR(255)"
                        schemaName="footstats"
                        tableName="matchstats"/>
    </changeSet>
    <changeSet author="vladimir.jevtic (generated)" id="1524050687731-678">
        <renameColumn columnDataType="INT"
                      newColumnName="passpercent"
                      oldColumnName="passes"
                      schemaName="footstats"
                      tableName="matchstats"/>
        <modifyDataType columnName="passpercent"
                        newDataType="float"
                        schemaName="footstats"
                        tableName="matchstats"/>
    </changeSet>

</databaseChangeLog>